# キーボード/操作一覧

## キーボードショートカット
- **Space**: 再生/停止（どこでも）
- **L**: ループ再生トグル（エディタタブがアクティブのとき）
- **Ctrl+S**: 選択中のファイルにゲインを適用して保存（Export > Save Selected）
- **Ctrl+W**: アクティブなエディタタブを閉じる
- **Ctrl+A**: リスト全選択（表示中のファイルすべて）
- **↑/↓**: リスト選択移動
- **Shift + ↑/↓**: アンカーから範囲拡張（複数選択）
- **Enter**: リストの選択項目をエディタタブで開く

## マウス操作
### シングルクリック
- **リストの行背景**: リスト行の選択（同時に音声ロード）
- **すべてのテキスト列**: そのファイルを選択（File / Folder / Length / Ch / SR / Bits / dBFS (Peak) / LUFS (I) / Gain / Wave）
  - 修飾キー: Shift+クリックで範囲選択、Ctrl(⌘)+クリックで個別トグル

### ダブルクリック
- **ファイル名セル**: そのファイルをエディタタブで開く（同時に選択）
- **フォルダセル**: そのWAVファイルを選択状態でOSのファイルブラウザを開く（同時に選択）

### その他
- **タブクリック**: リストタブ/エディタタブ切り替え時に自動的に音声停止
- **タブ閉じる**: タブの「x」ボタンクリック時に自動的に音声停止
- **テーブルヘッダクリック**: その列で並び替え（再クリックで昇順/降順切替）。列: File / Folder / Length / Ch / SR / Bits / dBFS (Peak) / LUFS (I) / Gain / Wave
- 上部バー:
  - Mode: Speed / Pitch / Stretch をセグメントで切替
    - Speed: 小型数値（DragValue, 0.25〜4.0, 2桁小数, `x`）で再生速度変更（ピッチ非保持）
    - Pitch: 小型数値（DragValue, -12..+12, 1桁小数, `st`）でピッチ変更（時間長保持）
    - Stretch: 小型数値（DragValue, 0.25〜4.0, 2桁小数, `x`）で時間伸縮（ピッチ保持）
  - Search: ファイル/フォルダを部分一致フィルタ

ゲイン編集（リストの Gain 列）
- **ドラッグ（DragValue）**: -24..+24 dB を調整。小数1桁、0.1刻み。
- **複数選択中**: 対象行での変更量が、選択されているすべての行に一括で加算されます（相対調整）。
- 未保存の行はファイル名末尾に " •" が付き、上部バーに "Unsaved Gains: N" が表示されます。
  
エディタ（波形キャンバス）でのズーム/パン（DAW ライク）
- **ホイール**: 時間ズーム（カーソル位置を中心）。ホイール上＝拡大。
- **Alt + 左ドラッグ / 中ドラッグ / 右ドラッグ**: 水平パン（ドラッグ操作を優先。ホイールは補助的に）。
- **Shift + ホイール**: 水平パン（横ホイール優先。なければ縦ホイールを横に読み替え）。
- **トラックパッドのピンチ**: ズーム（Ctrl/Alt なしでも可の環境あり）。
- 対象: キャンバス上にポインタがあるときのみ有効（矩形内判定）。
 - 仕様: パン操作は再生位置に影響しません（オーディオのシークは左クリック/左ドラッグ時のみ）。

ズーム表示（HUD）
- エディタ上部に「View: 表示時間（ms/s/min）」を主表示、近傍にスケール（px/samp or samp/px）を補助表示。
- 列の境界ドラッグ: 列幅のリサイズ（全列対応）
- テキストホバー: 長いファイル名・フォルダパスは切り詰め表示されるが、マウスオーバーで全文をツールチップ表示

補足
- Volume スライダは dB（-80〜+6）。内部は振幅へ変換して再生に適用。
- **ループ再生**: 
  - リスト表示時は常に無効（一度再生で停止）
  - エディタタブ表示時のみ L キーでトグル可能（全範囲ループ）
  - Pitch/Stretch では処理時の出力レイテンシと残り出力（flush）を考慮して末尾欠けを防止。
- Length 列は時間（mm:ss 形式）で表示、ソート時は秒数で比較。
- 将来は範囲選択で `loop_start/end` を UI から変更予定。
